# Visualizing Amount

Visualizing amount is a common task in data analysis. We will cover some of the best practices and some of the most common tools to do so.

Below we srart, as alwyas, let us load the packages we need:

```{r}
#| message: false
library(tidyverse)
library(palmerpenguins)
theme_set(theme_minimal()) #<1>
```
1. This tells ggplot to use the `tidyplots` package to style all the plots.

## Bar plots

Bar plots are one of the most common ways to visualize amount. They are easy to understand and can be used to compare the amount of different categories.

Below we will use the `penguins` dataset to show many penguins of different species. To do so, we will first count the number of penguins of each species:

```{r}
penguins_count <- penguins |>
    group_by(species) |> #<1>       
    summarise(n = n()) |> #<2>
    ungroup() #<3>
```
1. This tells R to group the data by the `species` column.
2. This tells R to count the number of rows in each group.
3. This tells R to remove the grouping.

Now we can plot the number of penguins of each species:

```{r}
penguins_count |> 
    ggplot(aes(x = species, y = n)) +
    geom_bar(stat = "identity")  #<1>
```
1. This tells ggplot to use the `n` column as the y-axis value.

There are a few techniques to make bar plots more informative:

::: {.panel-tabset}

## Change the theme

We can change the theme of the plot by using the `theme()` function.

```{r}
penguins_count |> 
    ggplot(aes(x = species, y = n)) +
    geom_bar(stat = "identity") +

```

## Adding amount values

It is common to add the amount of each category to the bar plot. We can do this by adding a `geom_text()` layer to the plot.

```{r}
#| source-line-numbers: "5"
penguins_count  |> 
    ggplot(aes(x = species, y = n)) +
    geom_bar(stat = "identity") +
    geom_text(aes(label = n), vjust = -0.5)  #<1>
```
1. This tells ggplot to move the label up by 0.5 units.

## Reordering bars

It is common to reorder the bars in a bar plot. We can do this by using the `reorder()` function.

```{r}
#| source-line-numbers: "4"
penguins_count |> 
    ggplot(aes(
        x = reorder(species, n), #<1>
        y = n
    )) + 
    geom_bar(stat = "identity") +
    geom_text(aes(label = n), vjust = -0.5) 
```
1. This tells ggplot to reorder the bars by the `n` column.

## Rotating axis

It is common to change x and y axis, where the x axis is the category and the y axis is the amount.

```{r}
penguins_count |> 
    ggplot(aes(y = reorder(species, n), x = n)) +
    geom_bar(stat = "identity") +
    geom_text(aes(label = n), hjust = -0.5) +
    coord_cartesian(clip = "off")
```

:::
